<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<title>Medical Chatbot</title>

	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

	<style>
		body,
		html {
			height: 100%;
			background: #f4f6fb;
			font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
		}

		.chat {
			margin-top: auto;
			margin-bottom: auto;
		}

		.card {
			height: 85vh;
			border-radius: 18px;
			border: none;
			box-shadow: 0 8px 30px rgba(0, 0, 0, 0.08);
		}

		.card-header {
			border-radius: 18px 18px 0 0;
			background: linear-gradient(135deg, #4facfe, #00f2fe);
			color: #fff;
		}

		.user_info span {
			font-size: 20px;
			font-weight: 600;
		}

		.user_info p {
			font-size: 13px;
			margin-bottom: 0;
			opacity: 0.9;
		}

		.msg_card_body {
			overflow-y: auto;
			padding: 20px;
			background: #f9fafc;
		}

		.img_cont img,
		.img_cont_msg img {
			height: 45px;
			width: 45px;
		}

		.msg_cotainer {
			background: #ffffff;
			padding: 12px 16px;
			border-radius: 18px;
			max-width: 75%;
			box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
		}

		.msg_cotainer_send {
			background: #4facfe;
			color: #fff;
			padding: 12px 16px;
			border-radius: 18px;
			max-width: 75%;
			box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
		}

		.msg_time,
		.msg_time_send {
			font-size: 10px;
			opacity: 0.6;
			display: block;
			margin-top: 5px;
		}

		.card-footer {
			border-radius: 0 0 18px 18px;
			background: #fff;
			border-top: 1px solid #eee;
		}

		.type_msg {
			border-radius: 30px;
			border: 1px solid #ddd;
			padding: 12px 20px;
		}

		.send_btn {
			border-radius: 50%;
			background: #4facfe;
			color: white;
			border: none;
			width: 45px;
			height: 45px;
			margin-left: 10px;
		}

		.send_btn:hover {
			background: #2f80ed;
		}
	</style>
</head>

<body>
	<div class="container-fluid h-100">
		<div class="row justify-content-center h-100">
			<div class="col-md-8 col-xl-6 chat">
				<div class="card">
					<div class="card-header">
						<div class="d-flex align-items-center">
							<div class="img_cont">
								<img src="https://cdn-icons-png.flaticon.com/512/387/387569.png"
									class="rounded-circle user_img">
							</div>
							<div class="user_info ml-3">
								<span>ðŸ©º Medical Chatbot</span>
								<p>Your AI health assistant</p>
							</div>
						</div>
					</div>

					<div id="messageFormeight" class="card-body msg_card_body"></div>

					<div class="card-footer">
						<form id="messageArea" class="input-group">
							<input type="text" id="text" name="msg" placeholder="Type your message..."
								autocomplete="off" class="form-control type_msg" required>
							<div class="input-group-append">
								<button type="submit" class="input-group-text send_btn">
									<i class="fas fa-paper-plane"></i>
								</button>
							</div>
						</form>
					</div>

				</div>
			</div>
		</div>
	</div>

	<script>
		$(document).ready(function () {
			$("#messageArea").on("submit", function (event) {
				event.preventDefault();

				const date = new Date();
				const str_time = date.getHours() + ":" + date.getMinutes();
				var rawText = $("#text").val();

				var userHtml = `
                <div class="d-flex justify-content-end mb-4">
                    <div class="msg_cotainer_send">
                        ${rawText}
                        <span class="msg_time_send">${str_time}</span>
                    </div>
                    <div class="img_cont_msg ml-2">
                        <img src="https://i.ibb.co/d5b84Xw/Untitled-design.png"
                             class="rounded-circle user_img_msg">
                    </div>
                </div>`;

				$("#text").val("");
				$("#messageFormeight").append(userHtml);
				$("#messageFormeight").scrollTop($("#messageFormeight")[0].scrollHeight);

				$.ajax({
					type: "POST",
					url: "/get",
					data: { msg: rawText }
				}).done(function (data) {
					var botHtml = `
                    <div class="d-flex justify-content-start mb-4">
                        <div class="img_cont_msg mr-2">
                            <img src="https://cdn-icons-png.flaticon.com/512/387/387569.png"
                                 class="rounded-circle user_img_msg">
                        </div>
                        <div class="msg_cotainer">
                            ${data}
                            <span class="msg_time">${str_time}</span>
                        </div>
                    </div>`;

					$("#messageFormeight").append(botHtml);
					$("#messageFormeight").scrollTop($("#messageFormeight")[0].scrollHeight);
				});
			});
		});
	</script>
</body>

</html>